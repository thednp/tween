{"version":3,"file":"index.iife.js","sources":["../src/Now.ts","../src/Runtime.ts","../src/Tween.ts","../src/Timeline.ts","../src/Easing.ts","../src/interpolators/array.ts","../src/interpolators/path.ts"],"sourcesContent":["let _nowFunc = () => performance.now();\n\nconst now = (): number => {\n  return _nowFunc();\n};\n\nexport function setNow(nowFunction: typeof _nowFunc) {\n  _nowFunc = nowFunction;\n}\n\nexport default now;\n","// Runtime.ts\nimport { type Tween } from \"./Tween\";\nimport { type Timeline } from \"./Timeline\";\nimport now from \"./Now\";\n\nexport const Tweens: Tween<any>[] = [];\nexport const Timelines: Timeline<any>[] = [];\nexport let rafID = 0;\n\nexport function Runtime(t = now()) {\n  let j = 0;\n  while (j < Timelines.length) {\n    if (Timelines[j].update(t)) {\n      j += 1;\n    } else {\n      Timelines.splice(j, 1);\n    }\n  }\n\n  let i = 0;\n  while (i < Tweens.length) {\n    if (Tweens[i].update(t)) {\n      i += 1;\n    } else {\n      Tweens.splice(i, 1);\n    }\n  }\n\n  if (!Tweens.length && !Timelines.length) {\n    cancelAnimationFrame(rafID);\n    rafID = 0;\n  } else rafID = requestAnimationFrame(Runtime);\n}\n","// Tween.ts\nimport type {\n  EasingFunction,\n  TweenCallback,\n  TweenProps,\n  TweenUpdateCallback,\n  BaseTweenProps,\n} from \"./types\";\nimport { Runtime, rafID, Tweens } from \"./Runtime\";\nimport now from \"./Now\";\n\nexport class Tween<T extends TweenProps> {\n  static Interpolators = new Map<\n    string,\n    <T extends never>(start: T, end: T, value: number) => T\n  >();\n  protected _object: T;\n  protected _startIsSet = false;\n  protected _startFired = false;\n  protected _propsStart: TweenProps = {};\n  protected _propsEnd: TweenProps = {};\n  protected _isPlaying = false;\n  protected _duration = 1000;\n  protected _delay = 0;\n  protected _easing: EasingFunction = (t) => t;\n  protected _startTime: number = 0;\n  protected _onUpdate?: TweenUpdateCallback<T>;\n  protected _onComplete?: TweenCallback<T>;\n  protected _onStart?: TweenCallback<T>;\n  protected _onStop?: TweenCallback<T>;\n\n  constructor(initialValues: T) {\n    this._object = initialValues;\n    return this;\n  }\n\n  get isPlaying(): boolean {\n    return this._isPlaying;\n  }\n\n  start(time = now(), overrideStart = false) {\n    if (this._isPlaying) return this;\n    if (!this._startIsSet || overrideStart) {\n      this._startIsSet = true;\n\n      this._setupProperties(\n        this._object,\n        this._propsStart,\n        this._propsEnd,\n        overrideStart,\n      );\n    }\n    this._isPlaying = true;\n    this._onStart?.(this._object);\n    Tweens.push(this);\n    this._startTime = time;\n    this._startTime += this._delay;\n    if (!rafID) Runtime();\n    return this;\n  }\n  startFromLast(time = now()) {\n    return this.start(time, true);\n  }\n  stop() {\n    if (!this._isPlaying) return this;\n    Tweens.splice(Tweens.indexOf(this), 1);\n    this._isPlaying = false;\n    if (this._onStop) this._onStop(this._object);\n    return this;\n  }\n  from(startValues: Partial<T>) {\n    // this._propsStart = startValues as T;\n    Object.assign(this._propsStart, startValues);\n    this._startIsSet = false;\n\n    return this;\n  }\n  to(endValues: Partial<T>) {\n    this._propsEnd = endValues as T;\n    this._startIsSet = false;\n\n    return this;\n  }\n  duration(seconds = 1) {\n    this._duration = seconds * 1000;\n    return this;\n  }\n  delay(seconds = 0) {\n    this._delay = seconds * 1000;\n    return this;\n  }\n  easing(easing: EasingFunction = (t) => t) {\n    this._easing = easing;\n    return this;\n  }\n  getDuration() {\n    return this._duration;\n  }\n  /**\n   * @param time - The current time\n   * @param autoStart - When true, calling update will implicitly call start()\n   * as well. Note, if you stop() or end() the tween, but are still calling\n   * update(), it will start again!\n   *\n   * @returns true if the tween is still playing after the update, false\n   * otherwise (calling update on a paused tween still returns true because\n   * it is still playing, just paused).\n   *\n   */\n  update(time = now(), autoStart?: boolean) {\n    if (!this._isPlaying) {\n      if (autoStart) this.start(time, true);\n      else return false;\n    }\n\n    if (time < this._startTime) {\n      return true;\n    }\n\n    if (!this._startFired && this._onStart) {\n      this._onStart(this._object);\n      this._startFired = true;\n    }\n\n    let elapsed = (time - this._startTime) / this._duration;\n    elapsed = this._duration === 0 || elapsed > 1 ? 1 : elapsed;\n    const progress = this._easing(elapsed);\n\n    this._updateProperties(\n      this._object,\n      this._propsStart,\n      this._propsEnd,\n      progress,\n    );\n\n    if (this._onUpdate) {\n      this._onUpdate(this._object, elapsed, progress);\n    }\n\n    if (elapsed === 1) {\n      if (this._onComplete) {\n        this._onComplete(this._object);\n      }\n      this._isPlaying = false;\n\n      return false;\n    }\n    return true;\n  }\n\n  onUpdate(callback?: TweenUpdateCallback<T>) {\n    this._onUpdate = callback;\n    return this;\n  }\n  onComplete(callback: TweenCallback<T>) {\n    this._onComplete = callback;\n    return this;\n  }\n  onStop(callback: TweenCallback<T>) {\n    this._onStop = callback;\n    return this;\n  }\n  onStart(callback: TweenCallback<T>) {\n    this._onStart = callback;\n    return this;\n  }\n  private _updateProperties(\n    object: TweenProps,\n    valuesStart: TweenProps,\n    valuesEnd: TweenProps,\n    value: number,\n  ): void {\n    for (const property in valuesEnd) {\n      // Don't update properties that do not exist in the source object\n      if (valuesStart[property] === undefined) continue;\n\n      const start = valuesStart[property];\n      const end = valuesEnd[property];\n\n      // Protect against non matching properties.\n      if (start.constructor !== end.constructor) continue;\n\n      // Protect against non numeric properties.\n      if (typeof end === \"number\") {\n        const startNum = start as number;\n        object[property] = startNum + (end - startNum) * value;\n      } else if (Tween.Interpolators.has(property)) {\n        const interpolator = Tween.Interpolators.get(property)!;\n        object[property] = interpolator(start as never, end as never, value);\n      } else if (typeof end === \"object\") {\n        this._updateProperties(\n          object[property] as BaseTweenProps,\n          start as BaseTweenProps,\n          end as BaseTweenProps,\n          value,\n        );\n      }\n    }\n  }\n  protected _setupProperties(\n    obj: T,\n    propsStart: TweenProps,\n    propsEnd: TweenProps,\n    overrideStartingValues: boolean,\n  ): void {\n    for (const property in propsEnd) {\n      const startValue = obj[property];\n\n      // Save the starting value, but only once unless override is requested.\n      if (\n        typeof propsStart[property] === \"undefined\" ||\n        overrideStartingValues\n      ) {\n        propsStart[property] = startValue;\n      }\n    }\n  }\n  static use(\n    property: string,\n    interpolateFn: <T extends never>(start: T, end: T, t: number) => T,\n  ): void {\n    if (!Tween.Interpolators.has(property))\n      Tween.Interpolators.set(property, interpolateFn);\n  }\n}\n","// Timeline.ts\nimport type {\n  TimelineEntry,\n  TweenProps,\n  TimelineEntryConfig,\n  TimelineCallback,\n  Position,\n  BaseTweenProps,\n} from \"./types\";\nimport { Timelines, Runtime, rafID } from \"./Runtime\";\nimport now from \"./Now\";\n\nexport class Timeline<T extends TweenProps = any> {\n  static Interpolators = new Map<\n    string,\n    <T extends never>(start: T, end: T, value: number) => T\n  >();\n  public state: T;\n  public _state: T;\n  private _entries: TimelineEntry<T>[] = [];\n  private _labels = new Map<string, number>();\n  private _progress = 0;\n  private _duration = 0;\n  private _time = 0;\n  private _pauseTime = 0;\n  private _lastTime?: number;\n  private _isPlaying = false;\n  private _repeat = 0;\n  private _initialRepeat = 0;\n  private _onStart?: TimelineCallback<T>;\n  private _onStop?: TimelineCallback<T>;\n  private _onPause?: TimelineCallback<T>;\n  private _onResume?: TimelineCallback<T>;\n  private _onUpdate?: TimelineCallback<T>;\n  private _onComplete?: TimelineCallback<T>;\n\n  constructor(initialState: T) {\n    this.state = initialState;\n    this._state = { ...initialState };\n  }\n\n  to(\n    {\n      duration = 1,\n      easing = (t) => t,\n      ...values\n    }: Partial<T> & TimelineEntryConfig,\n    position: Position = \"+=0\",\n  ): this {\n    const startTime = this._resolvePosition(position);\n    const to = values as Partial<T>;\n    const entryDuration = duration * 1000;\n\n    this._entries.push({\n      to,\n      startTime,\n      duration: entryDuration,\n      easing,\n      hasStarted: false,\n    });\n\n    const endTime = startTime + entryDuration;\n    this._duration = Math.max(this._duration, endTime);\n\n    return this;\n  }\n\n  play(): this {\n    if (this._pauseTime) return this.resume();\n    if (this._isPlaying) return this;\n\n    this._isPlaying = true;\n    this._lastTime = undefined;\n    this._time = 0;\n    this._resetState();\n    this._updateEntries(0);\n    this._onStart?.(this.state, 0);\n\n    Timelines.push(this);\n    if (!rafID) Runtime();\n    return this;\n  }\n\n  pause(): this {\n    if (!this._isPlaying) return this;\n    this._isPlaying = false;\n    this._pauseTime = now();\n    this._onPause?.(this.state, this.progress);\n    return this;\n  }\n\n  resume(time = now()): this {\n    if (this._isPlaying) return this;\n    this._isPlaying = true;\n    const dif = time - this._pauseTime;\n    this._pauseTime = 0;\n    this._lastTime = (this._lastTime || time) + dif;\n    this._onResume?.(this.state, this.progress);\n    Timelines.push(this);\n    if (!rafID) Runtime();\n    return this;\n  }\n\n  stop(): this {\n    if (!this._isPlaying) return this;\n    this._isPlaying = false;\n    this._time = 0;\n    this._pauseTime = 0;\n    Timelines.splice(Timelines.indexOf(this), 1);\n    this._resetState();\n    this._updateEntries(0);\n    if (this._onStop) this._onStop(this.state, this.progress);\n    return this;\n  }\n\n  repeat(count = 0): this {\n    this._repeat = count;\n    this._initialRepeat = count;\n    return this;\n  }\n\n  seek(pointer: number | string): this {\n    const elapsed = this._resolvePosition(pointer);\n    this._resetState();\n    this._time = Math.max(0, elapsed);\n    this._updateEntries(this._time);\n    return this;\n  }\n\n  label(name: string, position: Position = this._duration): this {\n    this._labels.set(name, this._resolvePosition(position));\n    return this;\n  }\n\n  onStart(cb: TimelineCallback<T>): this {\n    this._onStart = cb;\n    return this;\n  }\n\n  onPause(cb: TimelineCallback<T>): this {\n    this._onPause = cb;\n    return this;\n  }\n\n  onResume(cb: TimelineCallback<T>): this {\n    this._onResume = cb;\n    return this;\n  }\n\n  onStop(cb: TimelineCallback<T>): this {\n    this._onStop = cb;\n    return this;\n  }\n\n  onUpdate(cb: TimelineCallback<T>): this {\n    this._onUpdate = cb;\n    return this;\n  }\n\n  onComplete(cb: TimelineCallback<T>): this {\n    this._onComplete = cb;\n    return this;\n  }\n\n  get progress(): number {\n    return this._progress;\n  }\n\n  get duration(): number {\n    return this._duration;\n  }\n\n  update(time = now()) {\n    if (!this._isPlaying) return false;\n    if (this._lastTime === undefined) this._lastTime = time;\n    const delta = time - this._lastTime;\n    this._lastTime = time;\n    this._time += delta;\n\n    this._updateEntries(this._time);\n\n    if (this._progress === 1) {\n      if (this._repeat === 0) {\n        this._isPlaying = false;\n        this._repeat = this._initialRepeat;\n        Timelines.splice(Timelines.indexOf(this), 1);\n        this._onComplete?.(this.state, 1);\n      } else {\n        if (this._repeat !== Infinity) this._repeat--;\n        this._time = 0;\n        this._resetState();\n        this._updateEntries(0);\n      }\n    }\n    return this._isPlaying;\n  }\n\n  private _updateEntries(elapsed: number) {\n    this._progress =\n      this._duration === 0 || elapsed >= this._duration\n        ? 1\n        : elapsed / this._duration;\n\n    let i = 0;\n    const entriesLen = this._entries.length;\n    while (i < entriesLen) {\n      const entry = this._entries[i];\n      const localTime = elapsed - entry.startTime;\n      const tweenElapsed = Math.max(0, Math.min(1, localTime / entry.duration));\n\n      if (!entry.hasStarted && tweenElapsed > 0) {\n        entry.hasStarted = true;\n        entry.startValues = {};\n        for (const key in entry.to) {\n          entry.startValues[key] = this.state[key];\n        }\n      }\n\n      if (entry.hasStarted) {\n        this._setState(\n          this.state,\n          entry.startValues as TweenProps,\n          entry.to,\n          entry.easing(tweenElapsed),\n        );\n      }\n      i += 1;\n    }\n\n    this._onUpdate?.(this.state, this._progress);\n  }\n\n  private _resolvePosition(pos: Position): number {\n    if (typeof pos === \"number\") return pos * 1000;\n\n    if (typeof pos === \"string\") {\n      // First try label\n      const labelTime = this._labels.get(pos);\n      if (labelTime !== undefined) return labelTime;\n\n      // Then relative\n      if (pos.startsWith(\"+=\") || pos.startsWith(\"-=\")) {\n        let offset = parseFloat(pos.slice(2));\n        if (isNaN(offset)) offset = 0;\n        offset *= 1000;\n        return pos.startsWith(\"+=\")\n          ? this._duration + offset\n          : Math.max(0, this._duration - offset);\n      }\n    }\n\n    return this._duration;\n  }\n\n  private _setState(\n    object: TweenProps,\n    valuesStart: TweenProps,\n    valuesEnd: Partial<T> | TweenProps,\n    value: number,\n  ): void {\n    for (const property in valuesEnd) {\n      if (valuesStart[property] === undefined) continue;\n\n      const start = valuesStart[property];\n      const end = valuesEnd[property];\n\n      if (start.constructor !== end?.constructor) continue;\n\n      if (typeof end === \"number\") {\n        const startNum = start as number;\n        object[property] = startNum + (end - startNum) * value;\n      } else if (Timeline.Interpolators.has(property)) {\n        const interpolator = Timeline.Interpolators.get(property)!;\n        object[property] = interpolator(start as never, end as never, value);\n      } else if (typeof end === \"object\") {\n        this._setState(\n          object[property] as BaseTweenProps,\n          start as BaseTweenProps,\n          end as BaseTweenProps,\n          value,\n        );\n      }\n    }\n  }\n\n  private _resetState() {\n    Object.assign(this.state, this._state);\n    let i = 0;\n    const entriesLen = this._entries.length;\n    while (i < entriesLen) {\n      const entry = this._entries[i];\n      entry.hasStarted = false;\n      entry.startValues = undefined;\n      i += 1;\n    }\n  }\n\n  static use(\n    property: string,\n    interpolateFn: <T extends never>(start: T, end: T, t: number) => T,\n  ): void {\n    if (!Timeline.Interpolators.has(property))\n      Timeline.Interpolators.set(property, interpolateFn);\n  }\n}\n","// Easing.ts\nimport type { EasingFunction, EasingFunctionGroup } from \"./types\";\n\n/**\n * The Ease class provides a collection of easing functions for use with tween.js.\n */\n\nexport const Easing = Object.freeze({\n  Linear: Object.freeze<EasingFunctionGroup & { None: EasingFunction }>({\n    None(amount: number): number {\n      return amount;\n    },\n    In(amount: number): number {\n      return amount;\n    },\n    Out(amount: number): number {\n      return amount;\n    },\n    InOut(amount: number): number {\n      return amount;\n    },\n  }),\n\n  Quadratic: Object.freeze(<EasingFunctionGroup>{\n    In(amount: number): number {\n      return amount * amount;\n    },\n    Out(amount: number): number {\n      return amount * (2 - amount);\n    },\n    InOut(amount: number): number {\n      if ((amount *= 2) < 1) {\n        return 0.5 * amount * amount;\n      }\n\n      return -0.5 * (--amount * (amount - 2) - 1);\n    },\n  }),\n\n  Cubic: Object.freeze(<EasingFunctionGroup>{\n    In(amount: number): number {\n      return amount * amount * amount;\n    },\n    Out(amount: number): number {\n      return --amount * amount * amount + 1;\n    },\n    InOut(amount: number): number {\n      if ((amount *= 2) < 1) {\n        return 0.5 * amount * amount * amount;\n      }\n      return 0.5 * ((amount -= 2) * amount * amount + 2);\n    },\n  }),\n\n  Quartic: Object.freeze(<EasingFunctionGroup>{\n    In(amount: number): number {\n      return amount * amount * amount * amount;\n    },\n    Out(amount: number): number {\n      return 1 - --amount * amount * amount * amount;\n    },\n    InOut(amount: number): number {\n      if ((amount *= 2) < 1) {\n        return 0.5 * amount * amount * amount * amount;\n      }\n\n      return -0.5 * ((amount -= 2) * amount * amount * amount - 2);\n    },\n  }),\n\n  Quintic: Object.freeze(<EasingFunctionGroup>{\n    In(amount: number): number {\n      return amount * amount * amount * amount * amount;\n    },\n    Out(amount: number): number {\n      return --amount * amount * amount * amount * amount + 1;\n    },\n    InOut(amount: number): number {\n      if ((amount *= 2) < 1) {\n        return 0.5 * amount * amount * amount * amount * amount;\n      }\n\n      return 0.5 * ((amount -= 2) * amount * amount * amount * amount + 2);\n    },\n  }),\n\n  Sinusoidal: Object.freeze(<EasingFunctionGroup>{\n    In(amount: number): number {\n      return 1 - Math.sin(((1.0 - amount) * Math.PI) / 2);\n    },\n    Out(amount: number): number {\n      return Math.sin((amount * Math.PI) / 2);\n    },\n    InOut(amount: number): number {\n      return 0.5 * (1 - Math.sin(Math.PI * (0.5 - amount)));\n    },\n  }),\n\n  Exponential: Object.freeze(<EasingFunctionGroup>{\n    In(amount: number): number {\n      return amount === 0 ? 0 : Math.pow(1024, amount - 1);\n    },\n    Out(amount: number): number {\n      return amount === 1 ? 1 : 1 - Math.pow(2, -10 * amount);\n    },\n    InOut(amount: number): number {\n      if (amount === 0) {\n        return 0;\n      }\n\n      if (amount === 1) {\n        return 1;\n      }\n\n      if ((amount *= 2) < 1) {\n        return 0.5 * Math.pow(1024, amount - 1);\n      }\n\n      return 0.5 * (-Math.pow(2, -10 * (amount - 1)) + 2);\n    },\n  }),\n\n  Circular: Object.freeze(<EasingFunctionGroup>{\n    In(amount: number): number {\n      return 1 - Math.sqrt(1 - amount * amount);\n    },\n    Out(amount: number): number {\n      return Math.sqrt(1 - --amount * amount);\n    },\n    InOut(amount: number): number {\n      if ((amount *= 2) < 1) {\n        return -0.5 * (Math.sqrt(1 - amount * amount) - 1);\n      }\n      return 0.5 * (Math.sqrt(1 - (amount -= 2) * amount) + 1);\n    },\n  }),\n\n  Elastic: Object.freeze(<EasingFunctionGroup>{\n    In(amount: number): number {\n      if (amount === 0) {\n        return 0;\n      }\n\n      if (amount === 1) {\n        return 1;\n      }\n\n      return (\n        -Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI)\n      );\n    },\n    Out(amount: number): number {\n      if (amount === 0) {\n        return 0;\n      }\n\n      if (amount === 1) {\n        return 1;\n      }\n      return (\n        Math.pow(2, -10 * amount) * Math.sin((amount - 0.1) * 5 * Math.PI) + 1\n      );\n    },\n    InOut(amount: number): number {\n      if (amount === 0) {\n        return 0;\n      }\n\n      if (amount === 1) {\n        return 1;\n      }\n\n      amount *= 2;\n\n      if (amount < 1) {\n        return (\n          -0.5 *\n          Math.pow(2, 10 * (amount - 1)) *\n          Math.sin((amount - 1.1) * 5 * Math.PI)\n        );\n      }\n\n      return (\n        0.5 *\n          Math.pow(2, -10 * (amount - 1)) *\n          Math.sin((amount - 1.1) * 5 * Math.PI) +\n        1\n      );\n    },\n  }),\n\n  Back: Object.freeze(<EasingFunctionGroup>{\n    In(amount: number): number {\n      const s = 1.70158;\n      return amount === 1 ? 1 : amount * amount * ((s + 1) * amount - s);\n    },\n    Out(amount: number): number {\n      const s = 1.70158;\n      return amount === 0 ? 0 : --amount * amount * ((s + 1) * amount + s) + 1;\n    },\n    InOut(amount: number): number {\n      const s = 1.70158 * 1.525;\n      if ((amount *= 2) < 1) {\n        return 0.5 * (amount * amount * ((s + 1) * amount - s));\n      }\n      return 0.5 * ((amount -= 2) * amount * ((s + 1) * amount + s) + 2);\n    },\n  }),\n\n  Bounce: Object.freeze(<EasingFunctionGroup>{\n    In(amount: number): number {\n      return 1 - Easing.Bounce.Out(1 - amount);\n    },\n    Out(amount: number): number {\n      if (amount < 1 / 2.75) {\n        return 7.5625 * amount * amount;\n      } else if (amount < 2 / 2.75) {\n        return 7.5625 * (amount -= 1.5 / 2.75) * amount + 0.75;\n      } else if (amount < 2.5 / 2.75) {\n        return 7.5625 * (amount -= 2.25 / 2.75) * amount + 0.9375;\n      } else {\n        return 7.5625 * (amount -= 2.625 / 2.75) * amount + 0.984375;\n      }\n    },\n    InOut(amount: number): number {\n      if (amount < 0.5) {\n        return Easing.Bounce.In(amount * 2) * 0.5;\n      }\n      return Easing.Bounce.Out(amount * 2 - 1) * 0.5 + 0.5;\n    },\n  }),\n\n  pow(power = 4): EasingFunctionGroup {\n    power = power < Number.EPSILON ? Number.EPSILON : power;\n    power = power > 10000 ? 10000 : power;\n    return {\n      In(amount: number): number {\n        return amount ** power;\n      },\n      Out(amount: number): number {\n        return 1 - (1 - amount) ** power;\n      },\n      InOut(amount: number): number {\n        if (amount < 0.5) {\n          return (amount * 2) ** power / 2;\n        }\n        return (1 - (2 - amount * 2) ** power) / 2 + 0.5;\n      },\n    };\n  },\n});\n","// interpolators/array.ts\n\nexport function interpolateArray<T extends number[]>(\n  start: T,\n  end: T,\n  value: number,\n): T {\n  if (value === 0 && start.length !== end.length) {\n    console.warn(\"Array length mismatch.\");\n    return start;\n  }\n  const result = [] as unknown as T;\n  const len = end.length;\n  let i = 0;\n\n  while (i < len) {\n    result.push(start[i] + (end[i] - start[i]) * value);\n    i += 1;\n  }\n  return result;\n}\n","// interpolators/path.ts\nimport type {\n  LineValues,\n  CubeValues,\n  MorphPathArray,\n  MorphPathSegment,\n} from \"../types\";\n\n/**\n * NOTE: Path interpolation only works when both paths have:\n * - Identical command structure (same number and order of M/L/C/Z)\n * - Corresponding coordinates to interpolate\n * Complex morphs (square â†’ triangle) require preprocessing (e.g. KUTE.JS, Flubber)\n * @param start - A starting PathArray value\n * @param end - A starting PathArray value\n * @param t - The progress\n * @returns The interpolated PathArray value\n */\nexport function interpolatePath<T extends MorphPathArray>(\n  start: T,\n  end: T,\n  t: number,\n): T {\n  if (t === 0 && start.length !== end.length) {\n    console.warn(\"Path length mismatch. Returning start path.\");\n    return start;\n  }\n  const result = [] as unknown as T;\n\n  for (let i = 0; i < end.length; i += 1) {\n    const [pathCommand1, values1] = [\n      start[i][0],\n      start[i].slice(1) as LineValues | CubeValues,\n    ];\n    const [pathCommand2, values2] = [\n      end[i][0],\n      end[i].slice(1) as LineValues | CubeValues,\n    ];\n    const commandMismatch = pathCommand1 !== pathCommand2;\n\n    if (t === 0 && (values1.length !== values2.length || commandMismatch)) {\n      console.warn(\n        (commandMismatch ? \"PathCommand\" : \"Params\") +\n          \" mismatch at index: \" +\n          i +\n          \". Returning start path.\",\n      );\n      return start;\n    }\n\n    if (pathCommand1.toUpperCase() === \"Z\") {\n      result.push([\"Z\"]);\n    } else {\n      const resValues = [] as unknown as CubeValues | LineValues;\n\n      for (let j = 0; j < values2.length; j += 1) {\n        resValues.push(values1[j] + (values2[j] - values1[j]) * t);\n      }\n      result.push([pathCommand2, ...resValues] as MorphPathSegment);\n    }\n  }\n\n  return result;\n}\n"],"names":["_nowFunc","now","Tweens","Timelines","rafID","Runtime","j","i","_Tween","initialValues","__publicField","t","time","overrideStart","_a","startValues","endValues","seconds","easing","autoStart","elapsed","progress","callback","object","valuesStart","valuesEnd","value","property","start","end","startNum","interpolator","obj","propsStart","propsEnd","overrideStartingValues","startValue","interpolateFn","Tween","_Timeline","initialState","duration","values","position","startTime","to","entryDuration","endTime","dif","count","pointer","name","cb","delta","entriesLen","entry","localTime","tweenElapsed","key","pos","labelTime","offset","Timeline","Easing","amount","s","power","interpolateArray","result","len","interpolatePath","pathCommand1","values1","pathCommand2","values2","commandMismatch","resValues"],"mappings":"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"}