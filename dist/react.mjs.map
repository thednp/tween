{"version":3,"file":"react.mjs","names":[],"sources":["../src/react/index.ts"],"sourcesContent":["import { useState, useEffect, useRef } from \"react\";\nimport { Tween, Timeline, type TweenProps } from \"@thednp/tween\";\n\nexport * from \"@thednp/tween\";\n\nexport function useTween<T extends TweenProps>(initialValues: T) {\n  const [state, setState] = useState<T>({ ...initialValues });\n  const tweenRef = useRef<Tween<T> | null>(null);\n\n  if (!tweenRef.current) {\n    // Separate animated object (never mutate React state directly)\n    tweenRef.current = new Tween({ ...initialValues }).onUpdate((newState) => {\n      // Shallow copy is enough for most cases (nested objects are supported,\n      // but deep changes are rare in animations)\n      setState({...newState});\n    });\n  }\n\n  useEffect(() => {\n    // Cleanup: stop the tween (removes it from global loop)\n    return () => {\n      tweenRef.current?.stop();\n    };\n  }, []);\n\n  return [state, tweenRef.current!] as [T, Tween<T>];\n}\n\nexport function useTimeline<T extends TweenProps>(initialValues: T) {\n  const [state, setState] = useState<T>({ ...initialValues });\n\n  const timelineRef = useRef<Timeline<T> | null>(null);\n\n  if (!timelineRef.current) {\n    timelineRef.current = new Timeline({ ...initialValues }).onUpdate((newState) => {\n      setState({...newState});\n    });\n  }\n\n  useEffect(() => {\n    return () => {\n      timelineRef.current?.stop();\n    };\n  }, []);\n\n  return [state, timelineRef.current!] as [T, Timeline<T>];\n}\n"],"mappings":";;;;;;AAKA,SAAgB,SAA+B,eAAkB;CAC/D,MAAM,CAAC,OAAO,YAAY,SAAY,EAAE,GAAG,eAAe,CAAC;CAC3D,MAAM,WAAW,OAAwB,KAAK;AAE9C,KAAI,CAAC,SAAS,QAEZ,UAAS,UAAU,IAAI,MAAM,EAAE,GAAG,eAAe,CAAC,CAAC,UAAU,aAAa;AAGxE,WAAS,EAAC,GAAG,UAAS,CAAC;GACvB;AAGJ,iBAAgB;AAEd,eAAa;AACX,YAAS,SAAS,MAAM;;IAEzB,EAAE,CAAC;AAEN,QAAO,CAAC,OAAO,SAAS,QAAS;;AAGnC,SAAgB,YAAkC,eAAkB;CAClE,MAAM,CAAC,OAAO,YAAY,SAAY,EAAE,GAAG,eAAe,CAAC;CAE3D,MAAM,cAAc,OAA2B,KAAK;AAEpD,KAAI,CAAC,YAAY,QACf,aAAY,UAAU,IAAI,SAAS,EAAE,GAAG,eAAe,CAAC,CAAC,UAAU,aAAa;AAC9E,WAAS,EAAC,GAAG,UAAS,CAAC;GACvB;AAGJ,iBAAgB;AACd,eAAa;AACX,eAAY,SAAS,MAAM;;IAE5B,EAAE,CAAC;AAEN,QAAO,CAAC,OAAO,YAAY,QAAS"}