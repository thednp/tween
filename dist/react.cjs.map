{"version":3,"file":"react.cjs","names":[],"sources":["../src/react/index.ts"],"sourcesContent":["// import * as React from \"react\";\nimport { useEffect, useRef, useState } from \"react\";\nimport { Timeline, Tween, type TweenProps } from \"@thednp/tween\";\n\nexport * from \"@thednp/tween\";\n\nexport function useTween<T extends TweenProps>(initialValues: T) {\n  const [state, setState] = useState<T>({ ...initialValues });\n  const tweenRef = useRef<Tween<T> | null>(null);\n  const configureRef = useRef<((tween: Tween<T>) => void) | null>(null);\n\n  if (!tweenRef.current) {\n    tweenRef.current = new Tween(initialValues).onUpdate((newState) => {\n      setState({ ...newState });\n    });\n  }\n\n  useEffect(() => {\n    // istanbul ignore next @preserve\n    if (tweenRef.current && configureRef.current) {\n      configureRef.current(tweenRef.current);\n    }\n    return () => {\n      tweenRef.current?.stop();\n    };\n  }, []);\n\n  const setup = (configure: (tween: Tween<T>) => void) => {\n    configureRef.current = configure;\n  };\n\n  return [state, tweenRef.current, setup] as [T, Tween<T>, typeof setup];\n}\n\nexport function useTimeline<T extends TweenProps>(\n  initialValues: T,\n) {\n  const [state, setState] = useState<T>({ ...initialValues });\n  const timelineRef = useRef<Timeline<T> | null>(null);\n  const configureRef = useRef<((timeline: Timeline<T>) => void) | null>(null);\n\n  if (!timelineRef.current) {\n    timelineRef.current = new Timeline(initialValues).onUpdate((newState) =>\n      setState({ ...newState })\n    );\n  }\n\n  useEffect(() => {\n    // istanbul ignore else @preserve\n    if (timelineRef.current) {\n      timelineRef.current.clear(); // always reset before possible re-config\n\n      // istanbul ignore else @preserve\n      if (configureRef.current) {\n        configureRef.current(timelineRef.current);\n      }\n    }\n\n    return () => {\n      timelineRef.current?.stop();\n    };\n  }, []);\n\n  const setup = (configure: (timeline: Timeline<T>) => void) => {\n    configureRef.current = configure;\n  };\n\n  return [state, timelineRef.current, setup] as [T, Timeline<T>, typeof setup];\n}\n"],"mappings":";;;;AAMA,SAAgB,SAA+B,eAAkB;CAC/D,MAAM,CAAC,OAAO,gCAAwB,EAAE,GAAG,eAAe,CAAC;CAC3D,MAAM,6BAAmC,KAAK;CAC9C,MAAM,iCAA0D,KAAK;AAErE,KAAI,CAAC,SAAS,QACZ,UAAS,UAAU,IAAI,oBAAM,cAAc,CAAC,UAAU,aAAa;AACjE,WAAS,EAAE,GAAG,UAAU,CAAC;GACzB;AAGJ,4BAAgB;AAEd,MAAI,SAAS,WAAW,aAAa,QACnC,cAAa,QAAQ,SAAS,QAAQ;AAExC,eAAa;AACX,YAAS,SAAS,MAAM;;IAEzB,EAAE,CAAC;CAEN,MAAM,SAAS,cAAyC;AACtD,eAAa,UAAU;;AAGzB,QAAO;EAAC;EAAO,SAAS;EAAS;EAAM;;AAGzC,SAAgB,YACd,eACA;CACA,MAAM,CAAC,OAAO,gCAAwB,EAAE,GAAG,eAAe,CAAC;CAC3D,MAAM,gCAAyC,KAAK;CACpD,MAAM,iCAAgE,KAAK;AAE3E,KAAI,CAAC,YAAY,QACf,aAAY,UAAU,IAAI,uBAAS,cAAc,CAAC,UAAU,aAC1D,SAAS,EAAE,GAAG,UAAU,CAAA,CACzB;AAGH,4BAAgB;AAEd,MAAI,YAAY,SAAS;AACvB,eAAY,QAAQ,OAAO;AAG3B,OAAI,aAAa,QACf,cAAa,QAAQ,YAAY,QAAQ;;AAI7C,eAAa;AACX,eAAY,SAAS,MAAM;;IAE5B,EAAE,CAAC;CAEN,MAAM,SAAS,cAA+C;AAC5D,eAAa,UAAU;;AAGzB,QAAO;EAAC;EAAO,YAAY;EAAS;EAAM"}